@page "/trainingBlazor/showTenants"

<h2 class="text-primary">Наниматели</h2>
<p>Всего постоянных клиентов: @SelectedRegularCustomerCount</p>
<p>Последний выбранный наниматель: @LastTenant</p>
<div class="row border bg-light">
    @foreach (var row in tenants)
    {
        <_SeparateTenant row="row"
                         OnRegularCustomerSelection="@RegularCustomerCountChange"
                         OnClickedTenant="@ClickedTenant">
            <StringFirst><b>1</b></StringFirst>
            <StringSecond>2</StringSecond>
        </_SeparateTenant>
    }
</div>


@code {
    string Status { get; set; } = "Кнопка ещё не нажата!";
    private string selectedPhone = string.Empty;
    private int SelectedRegularCustomerCount { get; set; } = 0;
    private string LastTenant { get; set; } = string.Empty;
    protected void ClickedTenant(string tenant)
    {
        LastTenant = tenant;
    }
    protected void RegularCustomerCountChange(bool isSend)
    {
        if (isSend)
        {
            SelectedRegularCustomerCount++;
        }
        else
        {
            SelectedRegularCustomerCount--;
        }
    }
    List<Tenant> tenants = new List<Tenant>()
    {
        new Tenant()
        {
            Id = 1,
            Fio = "Иванов Алексей Владимирович",
            Dr = DateTime.Parse("01.12.1980", CultureInfo.GetCultureInfo("ru")),
            DateContact = DateTime.Parse("10.10.2024", CultureInfo.GetCultureInfo("ru")),
            Commission = 12000.50d,
            IsSend = true,
            Phones = new List<Phone>()
            {
                new Phone(){Id = 1, TypePhone = "Мобильный", NumberPhone = "+79257863538" },
                new Phone(){Id = 2, TypePhone = "Домашний", NumberPhone = "2607060" },
                new Phone(){Id = 3, TypePhone = "Рабочий", NumberPhone = "2355050" }
            }
        },
        new Tenant()
        {
            Id = 2,
            Fio = "Кузнецова Анна Петровна",
            Dr = DateTime.Parse("20.10.1985", CultureInfo.GetCultureInfo("ru")),
            DateContact = DateTime.Parse("15.03.2024", CultureInfo.GetCultureInfo("ru")),
            Commission = 14000.15d,
            IsSend = true,
            Phones = new List<Phone>()
            {
                new Phone(){Id = 1, TypePhone = "Мобильный", NumberPhone = "+79257867625" },
                new Phone(){Id = 2, TypePhone = "Домашний", NumberPhone = "2601050" },
                new Phone(){Id = 3, TypePhone = "Рабочий", NumberPhone = "2552040" }
            }
        }
    };
    Tenant tenant = new Tenant()
        {
            Id = 1,
            Fio = "Иванов Алексей Владимирович",
            Dr = DateTime.Parse("01.12.1980", CultureInfo.GetCultureInfo("ru")),
            DateContact = DateTime.Parse("10.10.2024", CultureInfo.GetCultureInfo("ru")),
            Commission = 12000.50d,
            IsSend = true,
            Phones = new List<Phone>()
            {
                new Phone(){Id = 1, TypePhone = "Мобильный", NumberPhone = "+79257863538" },
                new Phone(){Id = 2, TypePhone = "Домашний", NumberPhone = "2607060" },
                new Phone(){Id = 3, TypePhone = "Рабочий", NumberPhone = "2355050" }
            }
        };

    void SelectedPhonesChanged(ChangeEventArgs e)
    {
        if (e.Value is not null)
        {
            selectedPhone = (string) e.Value;
        }
    }
    private void ButtonClicked(bool isSingleClick)
    {
        Status = $"Кнопка нажата один раз {isSingleClick}";
    }
    private void ButtonDoubleClicked(string status)
    {
        Status = status;
    }
}